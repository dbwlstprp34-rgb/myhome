<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì–„ë¼ë¦¬ ì–„ë¼ ì¸í„°ë™í‹°ë¸Œ ê²Œì„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Harmony -->
    <!-- Application Structure Plan: ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë‹¨ì¼ í™”ë©´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ 'ì–„ë¼ë¦¬ ì–„ë¼' ê²Œì„ ê²½í—˜ì„ ì¤‘ì•™ ì§‘ì¤‘í™”í•©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ë¨¼ì € ìƒë‹¨ì˜ ë²„íŠ¼ì„ í†µí•´ ë‚œì´ë„(ë¬¸ì¥)ë¥¼ ì„ íƒí•©ë‹ˆë‹¤. ì„ íƒì´ ì™„ë£Œë˜ë©´, 'ê²Œì„ ë³´ë“œ' ì˜ì—­ì´ í•´ë‹¹ ë¬¸ì¥ì— ëŒ€í•œ ê²Œì„ íë¦„(ì•”ê¸° -> ë„ì „)ì„ ìˆœì°¨ì ìœ¼ë¡œ ì•ˆë‚´í•©ë‹ˆë‹¤. ì´ êµ¬ì¡°ëŠ” ì„ í˜•ì ì¸ PPT ë°©ì‹ì—ì„œ ë²—ì–´ë‚˜ ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ë‹¨ê³„ë¥¼ ì–¸ì œë“ ì§€ ë‹¤ì‹œ ì‹œì‘í•˜ê±°ë‚˜ ì„ íƒí•  ìˆ˜ ìˆê²Œ í•˜ì—¬ ìœ ì—°ì„±ê³¼ ì¬ì‚¬ìš©ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤. í•˜ë‹¨ì—ëŠ” ê²Œì„ì˜ ë³´ì¡° ìš”ì†Œì¸ 'íŠ¹ë³„ ê¸°íšŒ ì¹´ë“œ'ë¥¼ ë°°ì¹˜í•˜ì—¬, ê²Œì„ ì§„í–‰ ì¤‘ ì‹œê°ì ìœ¼ë¡œ ì‚¬ìš© ì—¬ë¶€ë¥¼ ì¶”ì í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤. í™•ì¥ëœ 'ê²Œì„ ì„¤ì •' ê¸°ëŠ¥ì€ ë¬¸ì¥, ì•”ê¸° ì‹œê°„, ê¸°íšŒ íšŸìˆ˜, ì¹­ì°¬ ê¸°ë¡ ë“± ê²Œì„ì˜ í•µì‹¬ ìš”ì†Œë¥¼ ì‚¬ìš©ìê°€ ì§ì ‘ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•  ìˆ˜ ìˆê²Œ í•˜ì—¬ ë°˜ë³µ í”Œë ˆì´ì˜ ê°€ì¹˜ë¥¼ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤. -->
    <!-- Visualization & Content Choices: 
        - ë³´ê³ ì„œ ì •ë³´: ê²Œì„ ê·œì¹™ -> ëª©í‘œ: ì •ë³´ ì œê³µ -> í‘œí˜„ ë°©ì‹: ì ‘ê¸°/í´ê¸°(ì•„ì½”ë””ì–¸) UI -> ìƒí˜¸ì‘ìš©: í´ë¦­ -> ì •ë‹¹í™”: í‰ì†Œì—ëŠ” ìˆ¨ê²¨ë‘ì–´ í™”ë©´ì„ ê¹”ë”í•˜ê²Œ ìœ ì§€í•˜ê³ , í•„ìš”í•  ë•Œë§Œ ê·œì¹™ì„ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ í•˜ì—¬ ì‚¬ìš©ì„±ì„ ê°œì„ í–ˆìŠµë‹ˆë‹¤.
        - ë³´ê³ ì„œ ì •ë³´: ê° ë‹¨ê³„ë³„ ë¬¸ì¥ -> ëª©í‘œ: ê²Œì„ ì½˜í…ì¸  ì„ íƒ -> í‘œí˜„ ë°©ì‹: ë‹¨ê³„ë³„ ë²„íŠ¼ ê·¸ë£¹ -> ìƒí˜¸ì‘ìš©: í´ë¦­ -> ì •ë‹¹í™”: ë“œë¡­ë‹¤ìš´ ë©”ë‰´ë³´ë‹¤ ê° ë‹¨ê³„ë¥¼ í•œëˆˆì— íŒŒì•…í•˜ê³  ì„ íƒí•˜ê¸° ì‰¬ìš°ë©°, í˜„ì¬ ì„ íƒëœ ë‹¨ê³„ë¥¼ ì‹œê°ì ìœ¼ë¡œ ëª…í™•íˆ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        - ë³´ê³ ì„œ ì •ë³´: ë¬¸ì¥ ì•”ê¸° ì‹œê°„ -> ëª©í‘œ: ê¸´ì¥ê° ë° ì‹œê°„ ì œí•œ ë¶€ì—¬ -> í‘œí˜„ ë°©ì‹: ë™ì ì¸ ì¹´ìš´íŠ¸ë‹¤ìš´ íƒ€ì´ë¨¸ í…ìŠ¤íŠ¸ -> ìƒí˜¸ì‘ìš©: ìë™ ì‹œì‘ -> ì •ë‹¹í™”: ì •ì ì¸ ì‹œê°„ ì•ˆë‚´ë³´ë‹¤ í›¨ì”¬ ë” ê²Œì„ì— ëª°ì…í•˜ê²Œ ë§Œë“¤ê³  ì¬ë¯¸ ìš”ì†Œë¥¼ ë”í•©ë‹ˆë‹¤.
        - ë³´ê³ ì„œ ì •ë³´: ìˆœì„œëŒ€ë¡œ ë‹¨ì–´ ë§í•˜ê¸° -> ëª©í‘œ: ê²Œì„ ì§„í–‰ ì´‰ì§„ -> í‘œí˜„ ë°©ì‹: 'í´ë¦­í•˜ì—¬ ë‹¨ì–´ í™•ì¸' ë²„íŠ¼ ê·¸ë¦¬ë“œ -> ìƒí˜¸ì‘ìš©: ê°œë³„ ë²„íŠ¼ í´ë¦­ -> ì •ë‹¹í™”: ê¸°ì¡´ì˜ ìˆœì°¨ì  ë‹¨ì–´ ê³µê°œ ë°©ì‹ì—ì„œ ë²—ì–´ë‚˜, ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ìˆœì„œëŒ€ë¡œ ê° ë‹¨ì–´ì˜ ì •ë‹µì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì¸í„°ë™í‹°ë¸Œí•œ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ëŠ” ì‹¤ì œ ê²Œì„ ì§„í–‰ ìƒí™©ê³¼ ìœ ì‚¬í•œ ê²½í—˜ì„ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.
        - ë³´ê³ ì„œ ì •ë³´: íŠ¹ë³„ ê¸°íšŒ ì¹´ë“œ -> ëª©í‘œ: ê²Œì„ ìƒíƒœ ì¶”ì  -> í‘œí˜„ ë°©ì‹: ì‚¬ìš© íšŸìˆ˜ê°€ í‘œì‹œëœ ë²„íŠ¼ -> ìƒí˜¸ì‘ìš©: í´ë¦­ ì‹œ ì‚¬ìš© ì²˜ë¦¬ ë° ë¹„í™œì„±í™” -> ì •ë‹¹í™”: ê²Œì„ì˜ ë¶€ê°€ ê·œì¹™ì„ ëª…í™•í•œ ì¸í„°í˜ì´ìŠ¤ë¡œ ì œê³µí•˜ì—¬ ì§„í–‰ìê°€ ì‰½ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë•ìŠµë‹ˆë‹¤.
        - ì¶”ê°€ ê¸°ëŠ¥: ë¬¸ì¥, ê¸°íšŒ íšŸìˆ˜, ì•”ê¸° ì‹œê°„, ì¹­ì°¬ ê¸°ë¡ ìˆ˜ì • -> ëª©í‘œ: ì‚¬ìš©ì ë§ì¶¤ ì„¤ì • -> í‘œí˜„ ë°©ì‹: ì„¤ì • íŒ¨ë„ ë‚´ ë‹¤ì–‘í•œ ì…ë ¥ í•„ë“œ(í…ìŠ¤íŠ¸, ìˆ«ì, í…ìŠ¤íŠ¸ ì˜ì—­) -> ìƒí˜¸ì‘ìš©: ì…ë ¥ ë° ì €ì¥ -> ì •ë‹¹í™”: ê²Œì„ ë°ì´í„°ë¥¼ ë™ì ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆê²Œ í•˜ì—¬ êµìœ¡ì  ëª©ì ì´ë‚˜ ì¬ë¯¸ë¥¼ ìœ„í•´ ì½˜í…ì¸ ë¥¼ ììœ ë¡­ê²Œ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” í™•ì¥ì„±ì„ ì œê³µí•©ë‹ˆë‹¤. ë¼ì´ë¸ŒëŸ¬ë¦¬: ìˆœìˆ˜ JavaScript ë° Tailwind CSS. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #FDF6E3;
            color: #654321;
        }
        .btn {
            @apply px-6 py-3 rounded-lg font-bold text-white transition-transform duration-200 transform hover:scale-105 shadow-md;
        }
        .btn-primary {
            @apply bg-amber-500 hover:bg-amber-600;
        }
        .btn-secondary {
            @apply bg-orange-500 hover:bg-orange-600;
        }
        .btn-accent {
            @apply bg-lime-600 hover:bg-lime-700;
        }
        .btn-disabled {
            @apply bg-gray-400 cursor-not-allowed hover:scale-100;
        }
        .card {
            @apply bg-white/70 backdrop-blur-sm p-6 sm:p-8 rounded-2xl shadow-lg border border-amber-200;
        }
        .active-level {
            @apply ring-4 ring-orange-400 scale-110;
        }
        .form-input {
            @apply w-full p-2 border border-amber-300 rounded-md focus:ring-2 focus:ring-amber-500 focus:outline-none bg-white/50;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-4xl mx-auto space-y-6">
        
        <header class="text-center">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-amber-800">ğŸ¥³ ì–„ë¼ë¦¬ ì–„ë¼ ê²Œì„ ğŸ¥³</h1>
        </header>

        <main class="space-y-6">
            <div id="setup" class="card">
                <div id="instructions-container" class="mb-6">
                    <button id="toggle-instructions" class="w-full text-left font-bold text-lg text-amber-700 flex justify-between items-center">
                        <span>ğŸ“œ ê²Œì„ ë°©ë²•ì„ ì•Œì•„ë³¼ê¹Œìš”?</span>
                        <span id="instruction-arrow">â–¼</span>
                    </button>
                    <div id="instructions" class="hidden mt-4 space-y-2 text-amber-900/80">
                        <p>1. **ë¬¸ì¥ ì™¸ìš°ê¸°:** í™”ë©´ì— ë³´ì´ëŠ” ë¬¸ì¥ì„ ì •í•´ì§„ ì‹œê°„ ë™ì•ˆ ë‹¤ í•¨ê»˜ ì™¸ì›Œìš”.</p>
                        <p>2. **í•œ ë‹¨ì–´ì”© ë§í•˜ê¸°:** ì²« ì‚¬ëŒë¶€í„° ìˆœì„œëŒ€ë¡œ ë„ì–´ì“°ê¸°ì— ë§ì¶° í•œ ë‹¨ì–´ì”© ì •í™•í•˜ê²Œ ë§í•´ìš”. (ë¬¸ì¥ ë "ì–„ë¼ë¦¬ ì–„ë¼"ê¹Œì§€!)</p>
                        <p>3. **ì„±ê³µê³¼ íƒˆë½:** ë¬¸ì¥ì„ í‹€ë¦¬ì§€ ì•Šê³  ëê¹Œì§€ ë§í–ˆë‹¤ë©´, ë§ˆì§€ë§‰ 'ì–„ë¼'ë¥¼ ì™¸ì¹œ ì‚¬ëŒì˜ ë‹¤ìŒ ì‚¬ëŒì´ íƒˆë½í•©ë‹ˆë‹¤. ë§Œì•½ ì¤‘ê°„ì— í‹€ë ¸ë‹¤ë©´, í‹€ë¦° ì‚¬ëŒì´ ë°”ë¡œ íƒˆë½í•©ë‹ˆë‹¤.</p>
                        <p>4. **íŠ¹ë³„ ê¸°íšŒ ì‚¬ìš©í•˜ê¸°:** **í†µê³¼**ì™€ **ë°˜ëŒ€ë¡œ** ê¸°íšŒëŠ” ì„¤ì •ëœ íšŸìˆ˜ë§Œí¼ ì“¸ ìˆ˜ ìˆì–´ìš”!</p>
                    </div>
                </div>

                <div id="settings-container" class="mb-6">
                    <button id="toggle-settings" class="w-full text-left font-bold text-lg text-amber-700 flex justify-between items-center">
                        <span>âš™ï¸ ê²Œì„ ì„¤ì • (ë¬¸ì¥, ì‹œê°„, ê¸°íšŒ ë“± ìˆ˜ì •)</span>
                        <span id="settings-arrow">â–¼</span>
                    </button>
                    <div id="settings" class="hidden mt-4 space-y-6 text-amber-900/80">
                        <div id="sentence-editor" class="space-y-4"></div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div>
                                <label for="pass-count" class="font-bold">'í†µê³¼' ê¸°íšŒ íšŸìˆ˜</label>
                                <input type="number" id="pass-count" value="1" min="0" class="form-input mt-1">
                            </div>
                            <div>
                                <label for="reverse-count" class="font-bold">'ë°˜ëŒ€ë¡œ' ê¸°íšŒ íšŸìˆ˜</label>
                                <input type="number" id="reverse-count" value="1" min="0" class="form-input mt-1">
                            </div>
                        </div>
                        <div>
                            <label for="scoreboard" class="font-bold">â­ ì¹­ì°¬ ê¸°ë¡íŒ (ì„±ê³µí•œ ì¹œêµ¬ ì´ë¦„ ì ê¸°)</label>
                            <textarea id="scoreboard" rows="3" class="form-input mt-1" placeholder="ì—¬ê¸°ì— ì„±ê³µí•œ ì¹œêµ¬ë“¤ ì´ë¦„ì„ ì ì–´ë‘ì„¸ìš”!"></textarea>
                        </div>
                        <button id="save-settings-btn" class="btn btn-accent w-full">ì„¤ì • ì €ì¥í•˜ê¸°</button>
                        <p id="save-feedback" class="text-center text-lime-700 font-bold hidden">ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!</p>
                    </div>
                </div>
                
                <div class="text-center space-y-4 border-t border-amber-200 pt-6">
                    <h2 class="text-xl font-bold text-amber-800">ë„ì „í•  ë¬¸ì¥ì„ ì„ íƒí•˜ì„¸ìš”!</h2>
                    <div id="level-selection" class="flex flex-wrap justify-center gap-3 sm:gap-4">
                        <button class="btn btn-primary" data-level="1">1ë‹¨ê³„</button>
                        <button class="btn btn-primary" data-level="2">2ë‹¨ê³„</button>
                        <button class="btn btn-primary" data-level="3">3ë‹¨ê³„</button>
                        <button class="btn btn-primary" data-level="4">4ë‹¨ê³„</button>
                        <button class="btn btn-primary" data-level="5">ì¶”ê°€</button>
                    </div>
                </div>
            </div>

            <div id="game-board" class="card text-center min-h-[300px] flex flex-col justify-center items-center p-6 transition-opacity duration-500">
                <div id="initial-message" class="text-amber-700">
                    <p class="text-2xl font-bold">ğŸ‘† ìœ„ì—ì„œ ë‹¨ê³„ë¥¼ ì„ íƒí•˜ë©´ ê²Œì„ì´ ì‹œì‘ë©ë‹ˆë‹¤!</p>
                </div>

                <div id="memorize-phase" class="hidden w-full space-y-4">
                    <h2 class="text-2xl font-bold text-orange-600">ì¤€ë¹„! ì™¸ìš¸ ì‹œê°„ì´ì—ìš”!</h2>
                    <p id="sentence-to-memorize" class="text-2xl sm:text-3xl font-bold my-4 leading-relaxed"></p>
                    <div id="timer" class="text-5xl font-bold text-lime-700"></div>
                    <button id="start-challenge-btn" class="btn btn-secondary hidden">ë„ì „ ì‹œì‘!</button>
                </div>

                <div id="challenge-phase" class="hidden w-full space-y-4">
                    <h2 class="text-2xl font-bold text-orange-600">ë„ì „! ìˆœì„œëŒ€ë¡œ í™•ì¸í•´ë³´ì„¸ìš”!</h2>
                    <div id="word-checker-container" class="my-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3">
                    </div>
                    <div class="flex flex-wrap justify-center gap-4 mt-6">
                        <button id="reveal-all-btn" class="btn btn-accent">ëª¨ë‘ ì •ë‹µ í™•ì¸</button>
                        <button id="reset-game-btn" class="btn btn-primary">ë‹¤ë¥¸ ë‹¨ê³„ ì„ íƒí•˜ê¸°</button>
                    </div>
                </div>
            </div>

            <div id="chance-cards" class="card text-center">
                 <h2 class="text-xl font-bold text-amber-800 mb-4">âœ¨ íŠ¹ë³„ ê¸°íšŒ ì¹´ë“œ âœ¨</h2>
                 <div class="flex justify-center gap-4">
                     <button id="pass-card" class="btn btn-accent w-32"></button>
                     <button id="reverse-card" class="btn btn-accent w-32"></button>
                 </div>
            </div>
        </main>
        
    </div>

    <script>
        const gameData = [
            { id: 1, time: 10, sentence: "ë‚´ê°€ ê·¸ë¦° ê¸°ë¦° ê·¸ë¦¼ì€ ì˜ ê·¸ë¦° ê¸°ë¦° ê·¸ë¦¼ì´ë‹¤." },
            { id: 2, time: 10, sentence: "ê°„ì¥ ê³µì¥ ê³µì¥ì¥ì€ ê°• ê³µì¥ì¥ì´ê³ , ëœì¥ ê³µì¥ ê³µì¥ì¥ì€ ê³µ ê³µì¥ì¥ì´ë‹¤." },
            { id: 3, time: 15, sentence: "ê²½ì°°ì²­ ì‡ ì°½ì‚´ì€ ì™¸ì² ì°½ì‚´ì´ê³  ê²€ì°°ì²­ ì‡ ì°½ì‚´ì€ ìŒì² ì°½ì‚´ì´ë‹¤." },
            { id: 4, time: 15, sentence: "ë“¤ì˜ ì½©ê¹ì§€ëŠ” ê¹ ì½©ê¹ì§€ì¸ê°€ ì•ˆ ê¹ ì½©ê¹ì§€ì¸ê°€." },
            { id: 5, time: 10, sentence: "ì €ê¸° ê°€ëŠ” ì € ìƒì¥ì‚¬ê°€ í—Œ ìƒì¥ì‚¬ëƒ ìƒˆ ìƒì¥ì‚¬ëƒ." }
        ];
        const GAME_SUFFIX = "ì–„ë¼ë¦¬ ì–„ë¼";

        let currentLevelData = null;
        let timerInterval = null;
        let passChancesTotal = 1;
        let reverseChancesTotal = 1;
        let passChancesLeft = 1;
        let reverseChancesLeft = 1;

        const initialMessage = document.getElementById('initial-message');
        const memorizePhase = document.getElementById('memorize-phase');
        const challengePhase = document.getElementById('challenge-phase');
        
        const sentenceToMemorize = document.getElementById('sentence-to-memorize');
        const timerDisplay = document.getElementById('timer');
        const startChallengeBtn = document.getElementById('start-challenge-btn');
        
        const levelButtons = document.querySelectorAll('#level-selection button');
        const passCard = document.getElementById('pass-card');
        const reverseCard = document.getElementById('reverse-card');
        const sentenceEditor = document.getElementById('sentence-editor');
        const resetGameBtn = document.getElementById('reset-game-btn');
        const revealAllBtn = document.getElementById('reveal-all-btn');

        function initializeGame() {
            gameData.forEach(level => {
                const editorGroup = document.createElement('div');
                editorGroup.className = "p-4 border border-amber-200 rounded-lg";
                
                const label = document.createElement('label');
                label.htmlFor = `sentence-input-${level.id}`;
                label.className = "font-bold text-lg";
                label.textContent = `${level.id === 5 ? 'ì¶”ê°€' : level.id + 'ë‹¨ê³„'} ë¬¸ì¥`;
                
                const textarea = document.createElement('textarea');
                textarea.id = `sentence-input-${level.id}`;
                textarea.className = 'form-input mt-2';
                textarea.rows = 2;
                textarea.value = level.sentence;

                const timeLabel = document.createElement('label');
                timeLabel.htmlFor = `time-input-${level.id}`;
                timeLabel.className = "font-bold mt-3 block";
                timeLabel.textContent = `ì™¸ìš°ëŠ” ì‹œê°„ (ì´ˆ)`;

                const timeInput = document.createElement('input');
                timeInput.type = 'number';
                timeInput.id = `time-input-${level.id}`;
                timeInput.className = 'form-input mt-1 w-24';
                timeInput.value = level.time;
                timeInput.min = "1";

                editorGroup.appendChild(label);
                editorGroup.appendChild(textarea);
                editorGroup.appendChild(timeLabel);
                editorGroup.appendChild(timeInput);
                sentenceEditor.appendChild(editorGroup);
            });
            updateChanceCardsUI();
        }

        function saveSettings() {
            gameData.forEach(level => {
                const textarea = document.getElementById(`sentence-input-${level.id}`);
                const timeInput = document.getElementById(`time-input-${level.id}`);
                level.sentence = textarea.value;
                level.time = parseInt(timeInput.value) || 10;
            });
            
            passChancesTotal = parseInt(document.getElementById('pass-count').value) || 0;
            reverseChancesTotal = parseInt(document.getElementById('reverse-count').value) || 0;
            
            resetChanceCards();

            const feedback = document.getElementById('save-feedback');
            feedback.classList.remove('hidden');
            setTimeout(() => {
                feedback.classList.add('hidden');
            }, 2000);
        }

        function updateChanceCardsUI() {
            passCard.textContent = `í†µê³¼ (${passChancesLeft}íšŒ)`;
            reverseCard.textContent = `ë°˜ëŒ€ë¡œ (${reverseChancesLeft}íšŒ)`;
            passCard.disabled = passChancesLeft <= 0;
            reverseCard.disabled = reverseChancesLeft <= 0;
            passCard.classList.toggle('btn-disabled', passCard.disabled);
            reverseCard.classList.toggle('btn-disabled', reverseCard.disabled);
        }

        function resetChanceCards() {
            passChancesLeft = passChancesTotal;
            reverseChancesLeft = reverseChancesTotal;
            updateChanceCardsUI();
        }

        function hideAllPhases() {
            initialMessage.classList.add('hidden');
            memorizePhase.classList.add('hidden');
            challengePhase.classList.add('hidden');
        }

        function selectLevel(levelId) {
            clearInterval(timerInterval);
            currentLevelData = gameData.find(level => level.id === levelId);
            resetChanceCards();

            levelButtons.forEach(btn => {
                btn.classList.toggle('active-level', parseInt(btn.dataset.level) === levelId);
            });

            hideAllPhases();
            memorizePhase.classList.remove('hidden');
            
            const challengeSentence = `${currentLevelData.sentence} ${GAME_SUFFIX}`;
            currentLevelData.challengeWords = challengeSentence.split(' ').filter(Boolean);
            
            sentenceToMemorize.textContent = challengeSentence;
            startChallengeBtn.classList.add('hidden');
            
            let timeLeft = currentLevelData.time;
            timerDisplay.textContent = timeLeft;
            
            timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerDisplay.textContent = "ì‹œê°„ ë!";
                    startChallengeBtn.classList.remove('hidden');
                }
            }, 1000);
        }
        
        function resetGame() {
            hideAllPhases();
            initialMessage.classList.remove('hidden');
            levelButtons.forEach(btn => btn.classList.remove('active-level'));
            clearInterval(timerInterval);
            resetChanceCards();
        }

        function startChallenge() {
            clearInterval(timerInterval);
            hideAllPhases();
            challengePhase.classList.remove('hidden');
            
            const wordCheckerContainer = document.getElementById('word-checker-container');
            wordCheckerContainer.innerHTML = ''; 

            currentLevelData.challengeWords.forEach((word, index) => {
                const wordButton = document.createElement('button');
                wordButton.className = 'p-4 rounded-lg font-bold text-amber-800 bg-amber-100 hover:bg-amber-200 transition text-lg';
                wordButton.textContent = `${index + 1}ë²ˆì§¸ ë‹¨ì–´`;
                wordButton.dataset.answer = word;
                wordButton.dataset.revealed = 'false';

                wordButton.addEventListener('click', () => {
                    if (wordButton.dataset.revealed === 'false') {
                        wordButton.textContent = wordButton.dataset.answer;
                        wordButton.classList.remove('bg-amber-100', 'hover:bg-amber-200', 'text-amber-800');
                        wordButton.classList.add('bg-lime-200', 'text-lime-800');
                        wordButton.dataset.revealed = 'true';
                    }
                });
                wordCheckerContainer.appendChild(wordButton);
            });
        }
        
        function revealAll() {
            const wordButtons = document.querySelectorAll('#word-checker-container button');
            wordButtons.forEach(button => {
                if (button.dataset.revealed === 'false') {
                    button.click();
                }
            });
        }

        levelButtons.forEach(button => {
            button.addEventListener('click', () => selectLevel(parseInt(button.dataset.level)));
        });

        startChallengeBtn.addEventListener('click', startChallenge);
        resetGameBtn.addEventListener('click', resetGame);
        revealAllBtn.addEventListener('click', revealAll);
        
        passCard.addEventListener('click', () => {
            if (passChancesLeft > 0) {
                passChancesLeft--;
                updateChanceCardsUI();
            }
        });
        
        reverseCard.addEventListener('click', () => {
            if (reverseChancesLeft > 0) {
                reverseChancesLeft--;
                updateChanceCardsUI();
            }
        });

        function setupCollapsible(toggleId, contentId, arrowId) {
            const toggle = document.getElementById(toggleId);
            const content = document.getElementById(contentId);
            const arrow = document.getElementById(arrowId);
            toggle.addEventListener('click', () => {
                content.classList.toggle('hidden');
                arrow.textContent = content.classList.contains('hidden') ? 'â–¼' : 'â–²';
            });
        }
        
        setupCollapsible('toggle-instructions', 'instructions', 'instruction-arrow');
        setupCollapsible('toggle-settings', 'settings', 'settings-arrow');

        document.getElementById('save-settings-btn').addEventListener('click', saveSettings);
        document.addEventListener('DOMContentLoaded', initializeGame);

    </script>
</body>
</html>


